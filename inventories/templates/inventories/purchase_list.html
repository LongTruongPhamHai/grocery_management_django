<!-- prettier-ignore -->
{% extends "base.html" %}
{% load static %}

{% block title %}Purchase History | Grocery Manager{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/tables.css' %}" />
{% endblock %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h2 class="fw-bold text-dark mb-1">Purchase History</h2>
    <p class="text-muted small">
      Track all incoming stock and procurement costs.
    </p>
  </div>
  <a
    href="{% url 'inventories:purchase_create' %}"
    class="btn btn-success rounded-pill px-4 shadow-sm text-white"
  >
    <i class="fa-solid fa-plus me-2"></i>New Purchase Receipt
  </a>
</div>

<div class="table-responsive shadow-sm rounded-4 bg-white">
  <table class="table table-hover align-middle mb-0">
    <thead class="bg-light">
      <tr>
        <th class="text-center">Product Name</th>
        <th class="text-center">Quantity</th>
        <th class="text-center">Unit Price</th>
        <th class="text-center">Total Amount</th>
        <th class="text-center">Date & Time</th>
      </tr>
    </thead>
    <tbody>
      {% for r in receipts %}
      <tr>
        <td class="text-center fw-semibold text-dark">{{ r.product.name }}</td>
        <td class="text-center">
          <span
            class="badge bg-info-subtle text-info-emphasis rounded-pill px-3"
          >
            {{ r.quantity }}
          </span>
        </td>
        <td class="text-center text-muted">{{ r.unit_price }}</td>
        <td class="text-center fw-bold text-success">{{ r.total_price }}</td>
        <td class="text-center">
          <div class="small text-dark">{{ r.datetime|date:"M d, Y" }}</div>
          <div class="text-muted" style="font-size: 0.75rem">
            {{ r.datetime|date:"H:i" }}
          </div>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-center py-5 text-muted">
          <i
            class="fa-solid fa-file-circle-exclamation d-block mb-3 fs-1 opacity-25"
          ></i>
          No purchase receipts found.
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
