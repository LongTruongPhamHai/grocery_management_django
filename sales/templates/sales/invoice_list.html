<!-- prettier-ignore -->
{% extends "base.html" %}
{% load static %}

{% block title %}Sales Invoices | Grocery Manager{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/tables.css' %}" />
{% endblock %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h2 class="fw-bold text-dark mb-1">Sales Invoices</h2>
    <p class="text-muted small">
      View and manage all customer transaction records.
    </p>
  </div>
  <a
    href="{% url 'sales:invoice_create' %}"
    class="btn btn-primary rounded-pill px-4 shadow-sm"
  >
    <i class="fa-solid fa-file-invoice me-2"></i>Create New Invoice
  </a>
</div>

<div class="table-responsive shadow-sm rounded-4 bg-white">
  <table class="table table-hover align-middle mb-0">
    <thead class="bg-light">
      <tr>
        <th class="ps-4 text-center">ID</th>
        <th class="text-center">Date & time</th>
        <th class="text-center">Total Amount</th>
        <th class="text-center">Status</th>
        <th class="text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for invoice in invoices %}
      <tr>
        <td class="ps-4 text-center">
          <span class="fw-bold text-primary">#{{ invoice.pk }}</span>
        </td>
        <td class="text-center">
          <div class="text-dark">{{ invoice.created_at|date:"M d, Y" }}</div>
          <div class="text-muted small">
            {{ invoice.created_at|date:"H:i" }}
          </div>
        </td>
        <td class="text-center fw-bold text-dark">
          ${{ invoice.total_amount }}
        </td>
        <td class="text-center">
          <span
            class="badge bg-success-subtle text-success border border-success-subtle rounded-pill"
          >
            <i class="fa-solid fa-check-circle me-1"></i>Completed
          </span>
        </td>
        <td class="text-center">
          <div class="btn-group">
            <a
              href="{% url 'sales:invoice_update' invoice.pk %}"
              class="btn btn-outline-primary btn-sm border-0 mx-1"
              title="View Details"
            >
              <i class="fa-solid fa-eye"></i>
            </a>
            <a
              href="{% url 'sales:invoice_delete' invoice.pk %}"
              class="btn btn-outline-danger btn-sm border-0 mx-1"
              title="Delete Invoice"
            >
              <i class="fa-solid fa-trash"></i>
            </a>
          </div>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-center py-5 text-muted">
          <i class="fa-solid fa-receipt d-block mb-3 fs-1 opacity-25"></i>
          No invoices recorded yet.
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
